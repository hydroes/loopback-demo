{
  "db": {
    "name": "db",
    "connector": "memory"
  },
  "consul": {
    "name": "consul",
    "crud": false,
    "connector": "rest",
    "debug": true,
    "operations": [
      {
        "template": {
          "method": "GET",
          "url": "http://localhost:8500/v1/catalog/services",
          "query": {
            "service": "{service_name}"
          },
          "options": {
            "strictSSL": false,
            "useQuerystring": true
          },
          "responsePath": "$"
        },
        "functions": {
          "services-via-rest": ["service_name"]
        }
      },
      {
        "template": {
          "method": "PUT",
          "url": "http://localhost:8500/v1/agent/service/register",
          "body": {
            "ID": "{id}",
            "Name": "{name}",
            "Address": "{address}",
            "Port": "{port}"
          },
          "options": {
            "strictSSL": false,
            "useQuerystring": false
          },
          "responsePath": "$.[0]"
        },
        "functions": {
          "register": ["id", "name", "address", "port"]
        }
      }
    ]
  }
}
